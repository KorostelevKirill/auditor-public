// ==UserScript==
// @name         –ê—É–¥–∏—Ç–æ—Ä
// @namespace    http://tampermonkey.net/
// @version      0.1.1
// @description  –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏ –ê—Ä—à–∏–Ω-–§–°–ê
// @author       shmelevvl@mail.ru
// @author       https://github.com/KorostelevKirill
// @match        https://fgis.gost.ru/fundmetrology/cm/lk/*
// @match        https://fgis.fsa.gov.ru/*
// @updateURL    https://raw.githubusercontent.com/KorostelevKirill/auditor-public/master/tampermonkey.prod.js
// @downloadURL  https://raw.githubusercontent.com/KorostelevKirill/auditor-public/master/tampermonkey.prod.js
// @grant        GM_xmlhttpRequest
// @grant        GM_getValue
// @grant        GM_setValue
// @connect      supabase.co
// @connect      *
// @require      https://unpkg.com/@supabase/supabase-js@2.39.3
// ==/UserScript==


!function(){"use strict";var t=n;function n(t,s){var r=e();return(n=function(t,n){return r[t-=477]})(t,s)}!function(t){for(var s=n,e=t();;)try{if(947554===parseInt(s(480))/1+parseInt(s(478))/2*(-parseInt(s(486))/3)+-parseInt(s(477))/4+parseInt(s(482))/5+-parseInt(s(484))/6*(-parseInt(s(481))/7)+parseInt(s(479))/8+-parseInt(s(483))/9)break;e.push(e.shift())}catch(t){e.push(e.shift())}}(e);var s=t(485);function e(){var t=["5363520slhHYb","1857800jNPAAn","7997577oTdwHr","7964450RmHUFq","24903765dkHdAD","6MLXniA","\n.auditor-sync-container {\n    position: fixed;\n    bottom: 20px;\n    right: 20px;\n    background: #fff;\n    border: 1px solid #ddd;\n    border-radius: 8px;\n    padding: 15px;\n    width: 300px;\n    height: 400px;\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n    z-index: 9999;\n    font-family: Arial, sans-serif;\n}\n\n.auditor-sync-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 10px;\n    padding-bottom: 10px;\n    border-bottom: 1px solid #eee;\n}\n\n.auditor-sync-title {\n    font-weight: bold;\n    color: #333;\n    margin: 0;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.auditor-sync-spinner {\n    display: none;\n    width: 20px;\n    height: 20px;\n    border: 3px solid #f3f3f3;\n    border-top: 3px solid #4CAF50;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n}\n\n.auditor-sync-close {\n    background: none;\n    border: none;\n    cursor: pointer;\n    color: #666;\n    padding: 5px;\n}\n\n.auditor-sync-toolbar {\n    display: flex;\n    gap: 8px;\n    margin-bottom: 12px;\n    padding: 8px;\n    background: #f5f5f5;\n    border-radius: 6px;\n    flex-wrap: wrap;\n}\n\n.auditor-sync-button {\n    padding: 6px 12px;\n    border: none;\n    border-radius: 4px;\n    background: #fff;\n    color: #333;\n    cursor: pointer;\n    font-size: 13px;\n    display: flex;\n    align-items: center;\n    gap: 4px;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n    transition: all 0.2s ease;\n}\n\n.auditor-sync-button:hover {\n    background: #4CAF50;\n    color: #fff;\n}\n\n.auditor-sync-button:active {\n    transform: translateY(1px);\n}\n\n.auditor-sync-button.disabled,\n.auditor-sync-button:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n    background: #f0f0f0;\n    color: #999;\n    box-shadow: none;\n    pointer-events: none;\n}\n\n.auditor-sync-button.danger {\n    color: #D32F2F;\n}\n\n.auditor-sync-button.danger:hover {\n    background: #D32F2F;\n    color: #fff;\n}\n\n.auditor-sync-button i {\n    font-size: 16px;\n}\n\n.auditor-sync-status {\n    font-size: 12px;\n    margin-bottom: 10px;\n    padding: 8px;\n    border-radius: 4px;\n    background: #f5f5f5;\n    white-space: pre-wrap;\n}\n\n.auditor-sync-notifications {\n    max-height: 150px;\n    padding-right: 5px;\n}\n\n.auditor-sync-notification {\n    padding: 8px;\n    margin-bottom: 8px;\n    border-radius: 4px;\n    opacity: 1;\n    transition: opacity 0.3s ease;\n    animation: slideIn 0.3s ease;\n}\n\n@keyframes slideIn {\n    from {\n        opacity: 0;\n        transform: translateX(10px);\n    }\n\n    to {\n        opacity: 1;\n        transform: translateX(0);\n    }\n}\n\n.auditor-sync-success {\n    background: #E8F5E9;\n    color: #2E7D32;\n}\n\n.auditor-sync-error {\n    background: #FFEBEE;\n    color: #C62828;\n}\n\n.auditor-sync-info {\n    background: #E3F2FD;\n    color: #1565C0;\n}\n\n.auditor-sync-minimize {\n    position: fixed;\n    bottom: 20px;\n    right: 20px;\n    background: #0079a2;\n    color: white;\n    border: none;\n    border-radius: 50%;\n    width: 40px;\n    height: 40px;\n    cursor: pointer;\n    display: none;\n    z-index: 9999;\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n}\n","603zdrxaq","1530396tSobov","11606gvXJWM"];return(e=function(){return t})()}const r=a;function i(){const t=["hideContainer","\n            ","title","info","showError","12oMmCfZ","querySelector","\n                <span>",".auditor-sync-close","3993765xjastV","button"," danger","description","enableButtons","textContent","hideSpinner","minimizeButton","display","style","setButtons","1692975DfdiXw",'\n            <div class="auditor-sync-header">                \n                <h3 class="auditor-sync-title">\n                    –ê—É–¥–∏—Ç–æ—Ä ü§ì\n                    <div class="auditor-sync-spinner"></div>\n                </h3>\n                <button class="auditor-sync-close">‚úï</button>\n            </div>\n            <div class="auditor-sync-toolbar"></div>\n            <div class="auditor-sync-status"></div>\n            <div class="auditor-sync-notifications"></div>\n        ',"showSuccess","div","3126530OehCPK","auditor-sync-button","10452992hekutg","forEach","1190wcBlnt","className",".auditor-sync-button","danger","isContainerVisible","head","firstChild","appendChild","none","addEventListener","block","createStyles","container","addNotification","306401QdmNfi","querySelectorAll","4jUkynH","showSpinner","auditor-sync-minimize","insertBefore","init","classList","opacity","disabled","body","remove","buttons","error","setAttribute","updateToolbar","click","setupEventHandlers","handler","disableButtons","type","auditor-sync-notification auditor-sync-","155349jrPmdl","spinner",".auditor-sync-spinner","showContainer","842086jQKpHe","innerHTML","createElement"];return(i=function(){return t})()}function a(t,n){const s=i();return(a=function(t,n){return s[t-=231]})(t,n)}!function(t){const n=a,s=t();for(;;)try{if(881817===-parseInt(n(237))/1+parseInt(n(290))/2+-parseInt(n(286))/3+-parseInt(n(239))/4*(parseInt(n(275))/5)+parseInt(n(271))/6*(parseInt(n(263))/7)+-parseInt(n(292))/8+parseInt(n(259))/9*(parseInt(n(294))/10))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(i);class o{constructor(){const t=a;this.container=null,this.minimizeButton=null,this[t(249)]=[],this.spinner=null,this.createStyles()}[r(285)](t){const n=r;this[n(249)]=t,this[n(235)]&&this[n(252)]()}[r(252)](){const t=r,n=this[t(235)]?.[t(272)](".auditor-sync-toolbar");n&&(n[t(264)]="",this.buttons[t(293)](s=>{const e=t,r=document[e(265)](e(276));r.className=e(291)+(s[e(257)]===e(297)?e(277):""),s.description&&r[e(251)](e(268),s[e(278)]),r[e(264)]=e(273)+s.icon+"</span> "+s.text+e(267),s[e(246)]&&(r.disabled=!0,r[e(244)].add(e(246))),!1===s.visible&&(r.style[e(283)]=e(231)),r.addEventListener(e(253),s[e(255)]),n[e(301)](r)}))}[r(243)](){const t=r;this.container=document[t(265)]("div"),this.container[t(295)]="auditor-sync-container",this[t(235)].style.display=t(231),this[t(235)][t(264)]=t(287),this[t(282)]=document[t(265)](t(276)),this[t(282)][t(295)]=t(241),this.minimizeButton[t(264)]="ü§ì",this[t(282)][t(284)].display=t(233),document[t(247)][t(301)](this[t(235)]),document[t(247)][t(301)](this[t(282)]),this[t(260)]=this[t(235)][t(272)](t(261)),this[t(254)](),this[t(252)]()}[r(254)](){const t=r;if(!this.container||!this[t(282)])return;const n=this[t(235)][t(272)](t(274));n&&(n[t(232)]("click",()=>{const n=t;this[n(235)][n(284)][n(283)]=n(231),this[n(282)][n(284)][n(283)]="block"}),this[t(282)].addEventListener(t(253),()=>{const n=t;this.container[n(284)][n(283)]=n(233),this[n(282)][n(284)][n(283)]=n(231)}))}updateStatus(t){setTimeout(()=>{const n=a;if(!this[n(235)])return;const s=this[n(235)][n(272)](".auditor-sync-status");s&&(s.textContent=t)},0)}[r(236)](t,n=r(269)){const s=r;if(!this[s(235)])return;const e=this[s(235)].querySelector(".auditor-sync-notifications");if(!e)return;const i=document[s(265)](s(289));i[s(295)]=s(258)+n,i[s(280)]=t,e[s(242)](i,e[s(300)]),setTimeout(()=>{const t=s;i[t(284)][t(245)]="0",setTimeout(()=>i[t(248)](),300)},3e3)}[r(270)](t){const n=r;this.addNotification(t,n(250))}[r(288)](t){this[r(236)](t,"success")}showInfo(t){const n=r;this[n(236)](t,n(269))}[r(240)](){const t=r;this[t(260)]&&(this[t(260)][t(284)][t(283)]=t(233))}[r(281)](){const t=r;this[t(260)]&&(this.spinner[t(284)][t(283)]=t(231))}[r(234)](){const t=r,n=document[t(265)]("style");n[t(280)]=s,document[t(299)].appendChild(n)}[r(298)](){const t=r;return null!==this[t(235)]&&this.container.style[t(283)]!==t(231)}[r(266)](){const t=r;this[t(235)]&&(this[t(235)][t(284)][t(283)]="none")}[r(262)](){const t=r;this[t(235)]&&(this[t(235)][t(284)].display=t(233))}[r(256)](){const t=r;if(!this[t(235)])return;this[t(235)].querySelectorAll(t(296))[t(293)](n=>{const s=t;n[s(246)]=!0,n[s(244)].add(s(246))})}[r(279)](){const t=r;if(!this[t(235)])return;this[t(235)][t(238)](t(296))[t(293)](n=>{const s=t;n[s(246)]=!1,n[s(244)].remove(s(246))})}}const c=h;function u(){const t=["5760scUrZr","error","455180qGDnDd","3213fvFeIO","includes","Invalid log level","338466JbhFzi","warn","1468800mrOiTH","info","toISOString","6OYwwqH","indexOf","45ItlRMg","toUpperCase","debug","log","677902bpSAvs","1537415fNQWeq","1867130nDlyVZ","levels","36BSpVLk","setLevel"];return(u=function(){return t})()}function h(t,n){const s=u();return(h=function(t,n){return s[t-=200]})(t,n)}!function(t){const n=h,s=t();for(;;)try{if(600960===parseInt(n(217))/1+-parseInt(n(208))/2+-parseInt(n(211))/3*(-parseInt(n(202))/4)+parseInt(n(213))/5*(-parseInt(n(206))/6)+parseInt(n(203))/7*(parseInt(n(200))/8)+-parseInt(n(221))/9*(-parseInt(n(219))/10)+-parseInt(n(218))/11)break;s.push(s.shift())}catch(t){s.push(s.shift())}}(u);class p{constructor(t=c(209)){const n=c;this[n(220)]=["error","warn",n(209),n(215)],this.level=t}[c(222)](t){const n=c;if(!this.levels[n(204)](t))throw new Error(n(205));this.level=t}[c(201)](t){this[c(216)]("error",t)}[c(207)](t){this[c(216)]("warn",t)}[c(209)](t){this[c(216)]("info",t)}debug(t){const n=c;this[n(216)](n(215),t)}log(t,n){const s=c;if(this[s(220)][s(212)](t)<=this.levels[s(212)](this.level)){const e=(new Date)[s(210)]();console[s(216)]("["+e+"] "+t[s(214)]()+": "+n)}}}var l=new p;function f(t,n){const s=I();return(f=function(t,n){return s[t-=347]})(t,n)}const d=f;function I(){const t=["info","https://eigaewbphgoleaqcyvvy.supabase.co","lte","createClient","toISOString","user_id","range","length","45GaFuEh","105XyGniv","randomUUID","orgname","34698RedVMb","421592PsFuCv","select","clearUserData","setDate","slice","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVpZ2Fld2JwaGdvbGVhcWN5dnZ5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzgwMzUzNzgsImV4cCI6MjA1MzYxMTM3OH0.K5e8SO6UD_T48-V9rpU-g4it5_UuGpfMBYdDg53EAK0","isAuthorized","29968368VfiZgZ","81666MDHiZb","PGRST116","delete","gte","deleteAllUserData","code","globalId","verif_date","3610tnTdRp","getDate","single","exact","from","user_id,global_id","order","463429nbimeo","supabase","2iILdRj","verifications","users","–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏","map","User authorized: ","split","verificationDate","currentUser","createUser","getRecordsByDateRange","addRecords","16522phXkoR","2699585vzRbSJ","update","–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω","72LGfOTj"];return(I=function(){return t})()}!function(t){const n=f,s=t();for(;;)try{if(285050===parseInt(n(351))/1*(-parseInt(n(353))/2)+parseInt(n(391))/3*(-parseInt(n(369))/4)+-parseInt(n(366))/5+-parseInt(n(382))/6*(-parseInt(n(379))/7)+parseInt(n(383))/8*(-parseInt(n(378))/9)+-parseInt(n(399))/10*(parseInt(n(365))/11)+parseInt(n(390))/12)break;s.push(s.shift())}catch(t){s.push(s.shift())}}(I);const y=d(371),g=d(388);class w{constructor(){const t=d;this[t(352)]=supabase[t(373)](y,g),this.currentUser=null}async[d(363)](t,n){const s=d;if(!this[s(361)])throw new Error(s(368));const e=[],r=1e3;let i=0,a=null;do{const{data:o,error:c,count:u}=await this.supabase[s(348)]("verifications")[s(384)]("*",{count:s(347)}).eq("user_id",this[s(361)].id)[s(394)](s(398),t).lte(s(398),n)[s(376)](i*r,(i+1)*r-1)[s(350)]("id");if(c)throw c;null===a&&(a=u),e.push(...o),i++}while(i*r<(a??0));return e}async getUserByField(t,n){const s=d,{data:e,error:r}=await this[s(352)][s(348)]("users")[s(384)]("*").eq(t,n)[s(401)]();if(r){if(r[s(396)]===s(392))return null;throw r}return e}async[d(362)](t){const n=d,s=crypto[n(380)](),{data:e,error:r}=await this[n(352)][n(348)]("users").insert({orgname:t,key:s}).select()[n(401)]();if(r)throw r;return e}async updateUser(t,n){const s=d,{data:e,error:r}=await this[s(352)][s(348)](s(355))[s(367)](n).eq("id",t)[s(384)]()[s(401)]();if(r)throw r;return e}async[d(364)](t){const n=d;if(!this[n(361)])throw new Error("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω");for(let s=0;s<t.length;s+=1e4){const e=t[n(387)](s,s+1e4)[n(357)](t=>({user_id:this[n(361)]?.id,global_id:t[n(397)],verif_date:t[n(360)]})),{error:r}=await this[n(352)][n(348)](n(354)).upsert(e,{onConflict:n(349),ignoreDuplicates:!0});if(r)throw r}return t[n(377)]}async removeOldRecords(t){const n=d;if(!this[n(361)])throw new Error(n(368));const s=new Date(t);s[n(386)](s[n(400)]()-3);const e=s[n(374)]()[n(359)]("T")[0],{error:r}=await this[n(352)][n(348)]("verifications")[n(393)]()[n(372)](n(398),e).eq(n(375),this[n(361)].id);if(r)throw r}async authorize(t){const n=d;if(!t)throw new Error(n(356));return this[n(361)]=t,l[n(370)](n(358)+t[n(381)]),!0}async[d(385)](){const t=d;if(!this[t(361)])throw new Error(t(368));const{error:n}=await this[t(352)][t(348)](t(354)).delete().eq(t(375),this[t(361)].id);if(n)throw n}async[d(395)](){const t=d;if(!this[t(361)])throw new Error(t(368));const{error:n}=await this[t(352)].from(t(354))[t(393)]().eq(t(375),this[t(361)].id);if(n)throw n}[d(389)](){return!!this[d(361)]}}function m(t,n){const s=v();return(m=function(t,n){return s[t-=149]})(t,n)}async function b(t,n={},s=5,e=1e3,r=6e4){const i=m;for(let a=0;a<s;a++){try{const s=new AbortController,{signal:e}=s,a=setTimeout(()=>s[i(150)](),r),o=await fetch(t,{...n,signal:e});if(clearTimeout(a),o.ok)return o[i(163)]()}catch(t){t instanceof Error&&(console[i(151)](i(152)+(a+1)+":",t[i(162)]),console[i(165)](t))}await new Promise(t=>setTimeout(t,e))}throw new Error("Failed to fetch "+t+" after "+s+i(159))}function v(){const t=["Error on retry ","408830wWfSCe","11591232dMohIW","59460qRdxWs","30558030behvuI","49HmpdgW","330WhfUqj"," retries.","5454153qJLIUW","69582xRhTvn","name","json","2wXGYsk","log","1443789yaHhew","abort","error"];return(v=function(){return t})()}function S(t,n={}){const s=D,e=new URL(t);return Object[s(359)](n)[s(353)](([t,n])=>{const r=s;e[r(355)][r(348)](t,n)}),e[s(360)]()}function D(t,n){const s=A();return(D=function(t,n){return s[t-=344]})(t,n)}function A(){const t=["2810NDgWYO","106939xAwoti","forEach","30dfomeC","searchParams","12TOwEyZ","970277oxihsc","7JPKhfq","entries","toString","53782VqfPLx","875864caxOtr","505980FoKHKz","593991SDRkHg","set","1164VxJSkK","60BZXxqu"];return(A=function(){return t})()}function x(t,n){const s=E();return(x=function(t,n){return s[t-=463]})(t,n)}function _(t=100,n=1e3){const s=[];return async function(){const e=x;let r=Date[e(475)]();for(;s[e(476)]>0&&r-s[0]>n;)s[e(477)]();for(;s.length>=t;){const t=s[0]+n-r;for(await new Promise(n=>setTimeout(n,t)),r=Date[e(475)]();s[e(476)]>0&&r-s[0]>n;)s[e(477)]()}s[e(468)](r)}}function E(){const t=["11ecJiPF","now","length","shift","35jFiGNl","10276120RLvZTR","176QdJbEV","183332HuGlKJ","1896914iDshTX","push","4SOIhpO","568884djBwiE","4977837olDmer","2557662MESJph","86863fUGAnX"];return(E=function(){return t})()}!function(t){const n=m,s=t();for(;;)try{if(828706===parseInt(n(164))/1*(parseInt(n(153))/2)+parseInt(n(149))/3+parseInt(n(155))/4*(-parseInt(n(158))/5)+parseInt(n(161))/6*(-parseInt(n(157))/7)+-parseInt(n(154))/8+-parseInt(n(160))/9+parseInt(n(156))/10)break;s.push(s.shift())}catch(t){s.push(s.shift())}}(v),function(t){const n=D,s=t();for(;;)try{if(113692===parseInt(n(352))/1+parseInt(n(344))/2*(-parseInt(n(356))/3)+-parseInt(n(349))/4*(-parseInt(n(351))/5)+parseInt(n(346))/6+-parseInt(n(358))/7*(-parseInt(n(345))/8)+parseInt(n(347))/9*(parseInt(n(354))/10)+parseInt(n(357))/11*(-parseInt(n(350))/12))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(A),function(t){const n=x,s=t();for(;;)try{if(549606===parseInt(n(466))/1+-parseInt(n(467))/2+parseInt(n(472))/3*(parseInt(n(469))/4)+parseInt(n(463))/5*(parseInt(n(470))/6)+-parseInt(n(473))/7*(-parseInt(n(465))/8)+parseInt(n(471))/9+parseInt(n(464))/10*(-parseInt(n(474))/11))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(E);const R=B;!function(t){const n=B,s=t();for(;;)try{if(952293===-parseInt(n(457))/1*(parseInt(n(456))/2)+parseInt(n(484))/3*(-parseInt(n(455))/4)+parseInt(n(470))/5*(-parseInt(n(472))/6)+parseInt(n(464))/7*(parseInt(n(460))/8)+parseInt(n(496))/9+parseInt(n(478))/10+parseInt(n(490))/11)break;s.push(s.shift())}catch(t){s.push(s.shift())}}(T);class k{constructor(){const t=B;this[t(477)]="https://fgis.gost.ru/fundmetrology/cm/lk",this[t(487)]=!1,this[t(495)]=null,this[t(463)]=null,this[t(465)]=null,this.apiUrl=null}async init(){return new Promise(t=>{const n=async()=>{const s=B;app?.[s(473)]?.[s(493)]?(this[s(487)]=!0,this[s(495)]=app[s(473)][s(493)],this[s(463)]=app[s(463)],this.orgname=app[s(473)].organizationName,this.apiUrl=this.serviceUrl+s(458)+this[s(495)],t()):setTimeout(n,500)};n()})}async[R(474)](t,n){const s=R,e=t[s(488)]("-")[0],r=n[s(488)]("-")[0],i={status:s(459),verificationDateBegin:t,verificationDateEnd:n,sortBy:s(492)};e===r&&(i[s(482)]=e);return await this.getRecords(i)}async[R(481)](t={}){const n=R;this[n(487)]||await this[n(489)]();const s=await this[n(466)](t),e=5e3,r=Math.ceil(s/e),i=_(2,1e3),a=Array.from({length:r},async(s,r)=>{const a=n,o={...t,offset:r*e,limit:e},c=S(this.apiUrl,o);await i();return(await this[a(483)](c)).rgsPrepVriViews[a(471)](t=>({globalId:t.globalId,verificationDate:t.verificationDate}))});return(await Promise[n(485)](a))[n(476)]()}async getAmount(t={}){const n=R,s={...t};s[n(486)]=10,s[n(461)]=0;const e=S(this[n(467)],s),{totalAmount:r}=await this[n(483)](e);return r}async[R(483)](t,n={}){const s=R;n[s(475)]={...n[s(475)],Authorization:"Bearer "+this[s(463)]};return await b(t,n)}async[R(497)](t,n=null,s=10){const e=R;if(!t[e(468)])return[];const r=Math.ceil(t[e(468)]/s),i=[];n&&n[e(480)]("–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –±–∞–∑—ã –ê—Ä—à–∏–Ω... 0/"+t[e(468)]);const a=_(5,1e3);for(let o=0;o<r;o++){const r=t[e(469)](o*s,(o+1)*s),c=await Promise[e(485)](r[e(471)](async(r,i)=>{const c=e;await a();const u=await b("https://fgis.gost.ru/fundmetrology/cm/iaux/vri/1-"+r+c(479));return u[c(494)]=r,n&&n.updateStatus(c(462)+(o*s+i+1)+"/"+t[c(468)]),u}));i[e(491)](...c)}return i}}function T(){const t=["98212RxhXoj","2228422uKNGQC","1GKJeQb","/api/rgsprepvriview/","PUBLISHED","1255264ZRPPoS","offset","–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –±–∞–∑—ã –ê—Ä—à–∏–Ω... ","token","14ZNqPeh","orgname","getAmount","apiUrl","length","slice","5NdCtgu","map","7861062btzGUB","user","getRecordsByDateRange","headers","flat","serviceUrl","5498340jncDMV","?nonpub=1","updateStatus","getRecords","year","sendRequest","93CAdltP","all","limit","initialized","split","init","31627640SxYszf","push","lastChanged_desc","organisationId","globalId","organizationId","3590406SqlTcv","getRecordsByGlobalId"];return(T=function(){return t})()}function B(t,n){const s=T();return(B=function(t,n){return s[t-=455]})(t,n)}function F(t,n){const s=U();return(F=function(t,n){return s[t-=233]})(t,n)}function L(t,n){if("object"!=typeof t||null===t)return null;if(t[F(241)](n))return t[n];for(let s in t)if(t.hasOwnProperty(s)&&"object"==typeof t[s]){const e=L(t[s],n);if(null!==e)return e}return null}function U(){const t=["hasOwnProperty","429704azAMvb","279763pjpNgi","16bHwArZ","750210dklVwu","850766jkUppA","191058VAGBQB","35kMKtAu","107622fFnkLK","48qXkFwG","69357aJYeQR","99ZUrVBS"];return(U=function(){return t})()}!function(t){const n=F,s=t();for(;;)try{if(174301===parseInt(n(243))/1+parseInt(n(242))/2+-parseInt(n(239))/3*(-parseInt(n(238))/4)+parseInt(n(236))/5*(parseInt(n(235))/6)+-parseInt(n(234))/7+parseInt(n(244))/8*(-parseInt(n(237))/9)+-parseInt(n(233))/10*(parseInt(n(240))/11))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(U);const N=O;function V(){const t=["getEmployeeByVerifierName","headers","sendRequest","init","getRecordsByDateRange","16VXqejB","105045qWgcZr","–£–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤... ","second_name","slice","all","querySelector","–°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤... 0/","certNum","addRecords","total","updateTableData"," –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –≤ –õ–ö –§–°–ê","parse","3469DixvBW","patronymic","/development/api/employees/rss/null","includes","fgis_token","documentNumber","getRecords","limit","4905400ekLAVB","–°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤... ","378204oGpkeH","div.left-panel_footer > div > button","numberOfAllRecords","join","arshinRecordsToDrafts","getAllDrafts","serviceUrl","modification","30DiEwEs","ceil","getDocumentNumber","deleteDrafts","getAmount","map","filter","verifiername","replace","155375CrkCQe","25264HkvIIs","publishDrafts","token","6ujePpI","globalId","createDraft","–ü—É–±–ª–∏–∫–∞—Ü–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤... 0/","initialized","click","snils","updateStatus","9wsBHTt","orgs","items","length","convertDate","validDate","application/json","stringify","push","Bearer ","first_name","getEmployees","/api/v1/roei/common/verification/get","3563285woujgf","637NZcGNa","/api/v1/roei/common/verification/draft","createDrafts","POST","–ü—É–±–ª–∏–∫–∞—Ü–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤... "];return(V=function(){return t})()}!function(t){const n=O,s=t();for(;;)try{if(250276===parseInt(n(519))/1*(parseInt(n(537))/2)+parseInt(n(506))/3*(parseInt(n(505))/4)+parseInt(n(546))/5*(-parseInt(n(550))/6)+-parseInt(n(495))/7*(-parseInt(n(547))/8)+-parseInt(n(481))/9*(parseInt(n(527))/10)+parseInt(n(494))/11+-parseInt(n(529))/12)break;s.push(s.shift())}catch(t){s.push(s.shift())}}(V);class C{constructor(){const t=O;this[t(535)]="https://fgis.fsa.gov.ru/",this[t(554)]=!1,this.token=null,this[t(524)]=null}async[N(503)](){const t=N;this[t(549)]=localStorage[t(523)],this[t(524)]=this[t(539)](),this.initialized=!0}getDocumentNumber(){const t=N;return JSON[t(518)](localStorage.fgis_lk)[t(482)][0][t(524)]}async[N(502)](t,n={}){const s=N;n[s(501)]={...n[s(501)],Authorization:s(490)+this[s(549)],"Content-Type":s(487)};return await b(t,n)}async[N(504)](t,n){const s={dateVerification:{startDate:t,endDate:n},dataStatus:[13],status:{id:6}};return await this.getRecords(s)}async[N(525)](t={}){const n=N,s=await this[n(541)](t),e=1e4,r=Math[n(538)](s/e),i=[];for(let s=0;s<r;s++){const r={...t,offset:s*e,limit:e},a=await this[n(502)](n(493),{method:n(498),body:JSON.stringify(r)});i[n(489)](...a[n(483)])}return i}async[N(534)](){const t=N;return await this[t(525)]({dataStatus:[20]})}async getAmount(t={}){const n=N,s=JSON[n(518)](JSON[n(488)](t));s[n(526)]=10,s[n(531)]=!0;return(await this[n(502)](n(493),{method:n(498),body:JSON[n(488)](s)}))[n(515)]}async getEmployees(){const t=N;return await this[t(502)](t(521))}async createDraft(t){const n=N;return await this[n(502)](n(496),{method:n(498),body:JSON.stringify(t)})}async createDrafts(t,n=null,s=100){const e=N,r=Math[e(538)](t[e(484)]/s),i=[];n&&n[e(480)](e(512)+t[e(484)]);const a=_(10,1e3);for(let o=0;o<r;o++){const r=t[e(509)](o*s,(o+1)*s),c=await Promise[e(510)](r.map(async(r,i)=>{const c=e;await a();const u=await this[c(552)](r);return n&&n[c(480)](c(528)+(o*s+i+1)+"/"+t[c(484)]),u}));i[e(489)](...c)}return i}async[N(548)](t=[],n=null,s=100){const e=N,r=Math[e(538)](t.length/s),i=[],a=[],o=[];n&&n[e(480)](e(553)+t[e(484)]);const c=_(1,1e3);for(let u=0;u<r;u++){await c();const r=t[e(509)](u*s,(u+1)*s),{idsInvalid:h,idsIgnored:p,idsSuccess:l}=await this[e(502)]("/api/v1/roei/common/verification/send",{method:e(498),body:JSON.stringify({ids:r})});n&&n[e(480)](e(499)+(u+1)*s+"/"+t[e(484)]),i.push(...h),a[e(489)](...p),o.push(...l)}return{invalid:i,ignored:a,success:o}}async[N(540)](t=[],n=null,s=100){const e=N,r=Math[e(538)](t[e(484)]/s),i=[],a=[];n&&n[e(480)]("–£–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤... 0/"+t[e(484)]);for(let o=0;o<r;o++){const r=t[e(509)](o*s,(o+1)*s),{idsRemoved:c,idsIgnored:u}=await this.sendRequest("/api/v1/roei/common/verification/delete",{method:e(498),body:JSON[e(488)]({ids:r})});n&&n[e(480)](e(507)+(o+1)*s+"/"+t[e(484)]),i[e(489)](...c),a.push(...u)}return{removed:i,ignored:a}}async[N(514)](t=[{}],n=null){const s=N,e=await this[s(533)](t);return await this[s(497)](e,n)}async[N(533)](t=[{}]){const n=N,s=await this[n(492)]();return t[n(542)](t=>{const e=n,r=L(t,e(536)),i=L(t,e(551)),a=L(t,e(513))?1:2,o=this.convertDate(L(t,"vrfDate")),c=1===a?this[e(485)](L(t,e(486))):null,u=L(t,e(544));return{typeMeasuringInstrument:r,numberVerification:i,resultVerification:a,dateVerification:o,dateEndVerification:c,approvedEmployees:[this.getEmployeeByVerifierName(s,u)]}})}[N(500)](t,n){const s=N,e=t[s(543)](t=>{const e=s;return n.includes(t[e(508)])&&n[e(522)](t[e(491)][0])&&n[e(522)](t.patronymic[0])});if(1===e[s(484)]){const t=e[0];return{idEmployee:t.id,firstName:t[s(491)],surname:t[s(508)],patronymic:t[s(520)],snils:t[s(556)][s(545)](/[-\s]/g,""),functions:t.functions[s(532)](",")}}if(0===e.length)throw new Error("–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å "+n+s(517));return null}[N(485)](t){const[n,s,e]=t.split(".");return e+"-"+s+"-"+n}[N(516)](){const t=N,n=document[t(511)](t(530));n&&n[t(555)]()}}function O(t,n){const s=V();return(O=function(t,n){return s[t-=480]})(t,n)}function M(t,n){const s=P();return(M=function(t,n){return s[t-=394]})(t,n)}function P(){const t=["180029yeTjsZ","9PtuvUo","1179925VQJlfY","metrics","3932kdaptN","3982bzGkYA","10490IVVsIY","489aVkrfh","223810cXFAXv","991976paUoeu","56pFwyhK","from","98052tOMSCT","insert"];return(P=function(){return t})()}!function(t){const n=M,s=t();for(;;)try{if(156821===-parseInt(n(404))/1+-parseInt(n(398))/2+parseInt(n(397))/3*(-parseInt(n(394))/4)+parseInt(n(406))/5+-parseInt(n(402))/6*(parseInt(n(400))/7)+-parseInt(n(399))/8*(-parseInt(n(405))/9)+parseInt(n(396))/10*(parseInt(n(395))/11))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(P);class z{constructor(t){this.supabase=t}async logEvent(t,n,s,e={}){const r=M,{error:i}=await this.supabase[r(401)](r(407))[r(403)]({user_id:t,event_type:n,success_count:s,details:e});if(i)throw i}}function H(){const t=["7142420PBaYnh","2773614sdvoJW","toISOString","split","getDate","8mWbvQp","23319774qUZEQe","111255DhWbLB","setDate","10DcvVUr","3411163VxNvGd","1541592pXgCfi","279591mmpaJs","12QJAFmR"];return(H=function(){return t})()}function J(t,n){const s=H();return(J=function(t,n){return s[t-=122]})(t,n)}function j(t){const n=J,s=new Date,e=new Date(s);e[n(126)](e[n(122)]()-t);const r=t=>t[n(134)]()[n(135)]("T")[0];return[r(e),r(s)]}function q(){const t=["88TBZVCt","35sElDQK","40CfOHJf","283699ZeoyOY","219693QivBqw","has","filter","4OimAxj","62770tLYLIu","138630vVXTKa","676385MdMlCp","240XsjRkZ","2XsTNjh","168710QBHZia","16137nUXQXE"];return(q=function(){return t})()}function G(t,n){const s=q();return(G=function(t,n){return s[t-=340]})(t,n)}function X(t,n){const s=G,e=new Set(n);return t[s(341)](t=>!e[s(340)](t))}async function Z(){const t=Y,n=await new Promise(t=>{const n=Y,s=document[n(162)](n(170));s[n(168)]="file",s.accept=n(167),s[n(153)]=!0,s.onchange=()=>{const e=n,r=s[e(166)];r&&t(Array[e(154)](r))},s.oncancel=()=>{t(null)},s[n(161)]()});if(!n||0===n[t(151)])return[];const s=[];for(const e of n){const n=await K(e),r=(new DOMParser).parseFromString(n,"text/xml")[t(160)](t(149));s[t(147)](...Array[t(154)](r)[t(152)](t=>t.textContent||""))}return s}function Y(t,n){const s=Q();return(Y=function(t,n){return s[t-=147]})(t,n)}function Q(){const t=["1897122wBZXkN","gost:globalID","554QHttMq","length","map","multiple","from","3220821nfxrKp","3536876uXZrFu","159195DCJOYV","184784gpHkfg","2793Ywcheq","getElementsByTagName","click","createElement","result","52zsCVmP","onerror","files",".xml","type","1697655KJYzUi","input","push"];return(Q=function(){return t})()}function K(t){return new Promise((n,s)=>{const e=Y,r=new FileReader;r.readAsText(t,"UTF-8"),r.onload=()=>n(r[e(163)]),r[e(165)]=t=>s(t)})}function W(t,n){const s=$();return(W=function(t,n){return s[t-=380]})(t,n)}function $(){const t=["second","abs","auto","floor","6jgxgCx","format","minute","getTime","1100DTBmyn","hour","5GubdPy","7362QPZoXV","656pGeVOJ","10VutpoP","day","158958eIMFQF","1395260ZQkTYI","1250767yzgUnZ","206604lLVKLs","65313TVtMhx","59208QziRiD"];return($=function(){return t})()}function tt(t,n=new Date){const s=W,e=new Intl.RelativeTimeFormat("ru",{numeric:s(397)});t=new Date(t),n=new Date(n);const r=(t[s(381)]()-n[s(381)]())/1e3;return Math[s(396)](r)<60?e[s(400)](Math.floor(r),s(395)):Math[s(396)](r)<3600?e[s(400)](Math[s(398)](r/60),s(380)):Math[s(396)](r)<86400?e[s(400)](Math.floor(r/3600),s(383)):e.format(Math[s(398)](r/86400),s(388))}function nt(t,n){const s=st();return(nt=function(t,n){return s[t-=193]})(t,n)}function st(){const t=["setDate","428346VpaWOD","77070rZiKOm","1386136pUPPVZ","51803dkagjJ","5dAfYSF","136614KpSjnO","513836hLGUWR","6zjRJVn","getDate","toISOString","596162zijbwV"];return(st=function(){return t})()}function et(t,n){const s=nt,e=[],r=new Date(t),i=new Date(n);for(;r<=i;)e.push(r[s(195)]().split("T")[0]),r[s(197)](r[s(194)]()+1);return e}function rt(){const t=["21112syWDmD","664989AWBKhY","7jPIcUz","10LeyHQd","227920YirIGS","ARSHIN","ARSHIN_SYNC","10JUYVPQ","5748PNdCML","6GdXGcc","FSA","ARSHIN_DELETE_ALL_DATA","9kGDVOB","13694472dBPrrj","FSA_PUBLISH_ALL_DRAFTS","3719048EHSqJP","400682DTlkSs","2343804yrLTJi"];return(rt=function(){return t})()}!function(t){const n=J,s=t();for(;;)try{if(746707===parseInt(n(125))/1*(parseInt(n(131))/2)+-parseInt(n(130))/3+parseInt(n(129))/4+parseInt(n(132))/5+parseInt(n(133))/6+-parseInt(n(128))/7*(-parseInt(n(123))/8)+parseInt(n(124))/9*(-parseInt(n(127))/10))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(H),function(t){const n=G,s=t();for(;;)try{if(176278===parseInt(n(347))/1*(-parseInt(n(343))/2)+-parseInt(n(354))/3+-parseInt(n(342))/4*(-parseInt(n(345))/5)+parseInt(n(344))/6*(-parseInt(n(351))/7)+-parseInt(n(352))/8*(parseInt(n(349))/9)+parseInt(n(348))/10*(-parseInt(n(350))/11)+parseInt(n(346))/12*(parseInt(n(353))/13))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(q),function(t){const n=Y,s=t();for(;;)try{if(646811===parseInt(n(159))/1*(parseInt(n(150))/2)+-parseInt(n(157))/3*(-parseInt(n(164))/4)+parseInt(n(169))/5+-parseInt(n(148))/6+-parseInt(n(156))/7+parseInt(n(158))/8+-parseInt(n(155))/9)break;s.push(s.shift())}catch(t){s.push(s.shift())}}(Q),function(t){const n=W,s=t();for(;;)try{if(186887===-parseInt(n(393))/1+parseInt(n(387))/2*(-parseInt(n(389))/3)+-parseInt(n(392))/4*(-parseInt(n(384))/5)+parseInt(n(399))/6*(parseInt(n(391))/7)+parseInt(n(386))/8*(-parseInt(n(385))/9)+-parseInt(n(390))/10+-parseInt(n(382))/11*(-parseInt(n(394))/12))break;s.push(s.shift())}catch(t){s.push(s.shift())}}($),function(t){const n=nt,s=t();for(;;)try{if(118882===parseInt(n(201))/1+-parseInt(n(203))/2*(-parseInt(n(193))/3)+parseInt(n(204))/4+parseInt(n(202))/5*(parseInt(n(199))/6)+-parseInt(n(196))/7+-parseInt(n(200))/8+parseInt(n(198))/9)break;s.push(s.shift())}catch(t){s.push(s.shift())}}(st);const it=at;function at(t,n){const s=rt();return(at=function(t,n){return s[t-=296]})(t,n)}!function(t){const n=at,s=t();for(;;)try{if(768970===-parseInt(n(296))/1+parseInt(n(307))/2*(-parseInt(n(299))/3)+parseInt(n(302))/4*(-parseInt(n(305))/5)+-parseInt(n(297))/6*(-parseInt(n(300))/7)+-parseInt(n(313))/8*(parseInt(n(310))/9)+parseInt(n(301))/10*(parseInt(n(311))/11)+parseInt(n(306))/12*(parseInt(n(298))/13))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(rt);const ot={ARSHIN:it(303),FSA:it(308)},ct={DAYS_RANGE:30},ut={ARSHIN:"https://fgis.gost.ru/fundmetrology/cm/lk",FSA:"https://fgis.fsa.gov.ru/"},ht={ARSHIN_SYNC:it(304),ARSHIN_DELETE_ALL_DATA:it(309),FSA_SYNC:"FSA_SYNC",FSA_LOAD_XML:"FSA_LOAD_XML",FSA_DELETE_ALL_DRAFTS:"FSA_DELETE_ALL_DRAFTS",FSA_PUBLISH_ALL_DRAFTS:it(312)};function pt(){const t=["–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ?","–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω","currentUser","3zRtZIB","–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:\n","1256PnTzJf","–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–µ—Ä–≤–∞–Ω–∞. –ß–µ—Ä–Ω–æ–≤–∏–∫–∏ –Ω–µ –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã.","–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤—Å–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏","1128732RjVOxG","–û—à–∏–±–∫–∞ –≤—Å—Ç–∞–≤–∫–∏ –∫–ª—é—á–∞: ","supabaseService","–û—à–∏–±–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤: "," —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?","–ö–ª—é—á —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω","–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∑–∞–ø–∏—Å–µ–π...","ARSHIN","Error publishing drafts:","getAllDrafts","disableButtons","getUserByField","–í—Å–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏ —É–¥–∞–ª–µ–Ω—ã","fsaService","default","showError","reverse","   –§–°–ê: "," –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π","last_arshin_sync_date","3003430VHhScW","state"," —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤, –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–æ ","–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å","–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á –¥–ª—è –§–°–ê –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞","message","all","orgname","–í—Å–µ –¥–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω—ã","–í—Å–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã"," —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤","–î–æ–±–∞–≤–ª–µ–Ω–æ ","authByArshin","updateUser","–ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –∏–∑ –±–∞–∑—ã –ê—Ä—à–∏–Ω...","–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å documentNumber","4108284LqYuSQ","113230vvTPan","updateTableData","–ù–µ—Ç —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è","18GeAWCX","FSA_DELETE_ALL_DRAFTS","handleStateChange","ARSHIN_DELETE_ALL_DATA","is_approved"," —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?","log","showInfo","–ù–∞–π–¥–µ–Ω–æ ","FSA_LOAD_XML","getRecordsByGlobalId","timeEnd","FSA","fsa_document_number","globalId","–£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Å–≤–µ–¥–µ–Ω–∏—è –æ –ø–æ–≤–µ—Ä–∫–∞—Ö –∏–∑ –±–∞–∑—ã –ê—É–¥–∏—Ç–æ—Ä–∞","setCurrentService","clipboard","–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: ","–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö: ","split","–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å","documentNumber","isContainerVisible","global_id","–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ","–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –∫–ª—é—á–æ–º –Ω–µ –Ω–∞–∏ÃÜ–¥–µ–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.","href","getFsaButtons","2022-01-01","FSA_SYNC","getRecordsByDateRange","currentService","init","publishDrafts","updateLastSyncDate","logEvent","–Ω–µ—Ç","–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ ","deleteDrafts","–í—Å—Ç–∞–≤–∏—Ç—å –∫–ª—é—á –∏–∑ –õ–ö –§–ì–ò–° –ê—Ä—à–∏–Ω","–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏","FSA_PUBLISH_ALL_DRAFTS","map","Error loading XML protocol:","updateToolbar","setButtons","checkUser","readText","removeOldRecords","–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å orgname","–ü–æ–∏—Å–∫ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤...","–°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤...","   –ê—Ä—à–∏–Ω: ","arshinService","metricService","–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–ª—é—á–∞","writeText","–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞ –ø–æ—á—Ç—É info@arshin-fsa.ru","–í—Å–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏ —É–¥–∞–ª–µ–Ω—ã. –£–¥–∞–ª–µ–Ω–æ ","run","authByFsa","–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ç ","isRunning","showLastSyncDate","supabase","–¢–µ—Å—Ç","updateStatusInterval","–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤: ","getArshinButtons","–°–æ–∑–¥–∞—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫–∏ –∏–∑ XML –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –õ–ö –§–ì–ò–° –ê—Ä—à–∏–Ω","join","error","authorize","Error syncing FSA:","17052vIuxBo","key","filter","createDrafts","showSuccess","–î–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã","danger","addRecords","–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á","–û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –§–°–ê: ","–ö–ª—é—á –¥–ª—è –õ–ö –§–°–ê —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞","includes","–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω","time","3702305VGtyJf","updateStatus","createUser","length","–£–¥–∞–ª–∏—Ç—å –≤—Å–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏","DAYS_RANGE","458419bjIvrI"];return(pt=function(){return t})()}const lt=ft;function ft(t,n){const s=pt();return(ft=function(t,n){return s[t-=156]})(t,n)}!function(t){const n=ft,s=t();for(;;)try{if(410006===parseInt(n(192))/1+-parseInt(n(238))/2*(parseInt(n(196))/3)+parseInt(n(201))/4+-parseInt(n(186))/5+parseInt(n(237))/6+parseInt(n(172))/7*(parseInt(n(198))/8)+-parseInt(n(241))/9*(parseInt(n(221))/10))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(pt);class dt{constructor(){const t=ft;this[t(203)]=new w,this[t(295)]=new k,this[t(214)]=new C,this.ui=new o,this[t(296)]=new z(this.supabaseService[t(162)]),this.currentService=null,this[t(195)]=null,this[t(222)]=new Proxy({isRunning:!1},{get:(t,n)=>t[n],set:(n,s,e)=>{const r=t,i=n[s];return n[s]=e,this[r(243)](s,e,i),!0}}),this[t(164)]=setInterval(()=>{const n=t;this.ui[n(264)]()&&(this.state[n(160)]||this[n(161)]())},3e4)}getArshinButtons(){const t=ft;return[{text:t(180),icon:"üîë",description:t(225),type:t(215),visible:!this.currentUser?.[t(254)],handler:async()=>{const n=t;this[n(222)].isRunning=!0;try{const t=this[n(195)]?.[n(173)]||"";this.ui[n(176)](n(182)),await navigator[n(258)][n(298)](t)}catch(t){this.ui[n(216)]("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∫–ª—é—á–∞: "+t.message)}finally{this.state.isRunning=!1}}},{text:t(224),icon:"üîÑ",type:t(215),visible:!!this[t(195)]?.[t(254)],description:"–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö —Å –±–∞–∑–æ–π –ê—É–¥–∏—Ç–æ—Ä–∞",handler:async()=>{const n=t;this.state[n(160)]=!0;try{await this[n(288)]();let t=0;const[s,e]=j(ct.DAYS_RANGE),r=et(s,e);for(const s of r){this.ui.updateStatus("–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ç "+s[n(261)]("-")[n(217)]()[n(168)]("."));const[e,r]=await Promise[n(227)]([this[n(295)][n(272)](s,s),this[n(203)][n(272)](s,s)]),i=e[n(284)](t=>t[n(255)]),a=X(i,r[n(284)](t=>t[n(265)]));if(a[n(189)]>0){const s=e[n(174)](t=>a.includes(t[n(255)]));await this[n(203)][n(179)](s),this.ui.showSuccess(n(232)+s[n(189)]+n(219)),t+=s[n(189)]}}await this[n(276)](),this.ui[n(176)]("–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –û–±–Ω–æ–≤–ª–µ–Ω–æ "+t+" –∑–∞–ø–∏—Å–µ–π"),await this[n(203)][n(290)](s),this[n(277)](ht.ARSHIN_SYNC,t,{new_records_count:t})}catch(t){console[n(169)](t),this.ui[n(216)](n(259)+t[n(226)])}finally{this.state[n(160)]=!1}}},{text:t(266),icon:"üóëÔ∏è",type:t(178),description:t(256),visible:!1,handler:async()=>{const n=t;if(confirm(n(193))){this[n(222)][n(160)]=!0;try{await this[n(203)].deleteAllUserData(),this.ui[n(176)](n(229)),this.ui[n(187)](n(177)),this[n(277)](ht[n(244)],0,{})}catch(t){console[n(169)]("Error deleting user data:",t),this.ui[n(216)](n(260)+t[n(226)])}finally{this[n(222)][n(160)]=!1}}}},{text:t(163),icon:"üß™",visible:!1,handler:async()=>{const n=t;this[n(222)].isRunning=!0;try{console[n(185)](n(163));const t=await this[n(295)][n(272)](n(270),"2024-12-31");console[n(247)](t),console[n(252)]("–¢–µ—Å—Ç")}catch(t){console.error(t),this.ui[n(216)](n(259)+t[n(226)])}finally{this[n(222)][n(160)]=!1}}}]}[lt(269)](){const t=lt;return[{text:"–í—Å—Ç–∞–≤–∏—Ç—å –∫–ª—é—á",icon:"üîë",description:t(281),type:"default",visible:!this.currentUser,handler:async()=>{const n=t;this[n(222)][n(160)]=!0;try{const t=await navigator.clipboard[n(289)]();if(!t||36!==t.length)throw new Error(n(297));const s=await this[n(203)][n(212)](n(173),t);if(!s)throw new Error(n(194));const e=await this.supabaseService[n(234)](s.id,{fsa_document_number:this[n(214)][n(263)]});this[n(203)][n(170)](e),this[n(195)]=e,this.ui[n(176)](n(206)),this[n(286)]()}catch(t){this.ui[n(216)](n(202)+t[n(226)])}finally{this[n(222)][n(160)]=!1}}},{text:t(224),icon:"üîÑ",type:t(215),visible:!!this.currentUser,handler:async()=>{const n=t;this.state.isRunning=!0;try{if(await this[n(288)](),!this[n(195)]?.last_arshin_sync_date)return void this.ui[n(248)]("–î–ª—è –Ω–∞—á–∞–ª–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å –õ–ö –§–ì–ò–° –ê—Ä—à–∏–Ω");this.ui[n(187)](n(292));const t=await this[n(214)][n(210)]();if(t.length>0){if(!confirm(n(249)+t[n(189)]+" —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤. –î–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏. –í—ã –¥–µ–∏ÃÜ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å? (—á–µ—Ä–Ω–æ–≤–∏–∫–∏ —É–¥–∞–ª—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)"))return this.ui[n(248)](n(199));{this.ui[n(187)]("–£–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤...");const{removed:s,ignored:e}=await this[n(214)][n(280)](t[n(284)](t=>t.id),this.ui);this.ui.showSuccess(n(156)+s[n(189)]+", –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–æ "+e.length),this[n(214)].updateTableData()}}const[s,e]=j(ct[n(191)]),r=et(s,e);let i=0;for(const t of r){this.ui[n(187)](n(159)+t[n(261)]("-")[n(217)]()[n(168)](".")),await new Promise(t=>setTimeout(t,1e3));const s=(await this[n(203)][n(272)](t,t))[n(284)](t=>t.global_id),e=X(s,(await this[n(214)].getRecordsByDateRange(t,t))[n(284)](t=>Number(t.numberVerification)));if(e[n(189)]>0){const t=await this[n(295)][n(251)](e,this.ui),s=await this[n(214)][n(179)](t,this.ui);this.ui[n(176)]("–î–æ–±–∞–≤–ª–µ–Ω–æ "+s[n(189)]+" —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤"),i+=s[n(189)]}}await this[n(276)](),this.ui.showSuccess("–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –î–æ–±–∞–≤–ª–µ–Ω–æ "+i+n(231)),this[n(277)](ht[n(271)],i,{new_records_count:i})}catch(t){console[n(169)](n(171),t),this.ui[n(216)](n(181)+t[n(226)])}finally{this[n(222)][n(160)]=!1}}},{text:"–ó–∞–≥—Ä—É–∑–∏—Ç—å XML –ø—Ä–æ—Ç–æ–∫–æ–ª",icon:"üìù",description:t(167),type:t(215),visible:!!this.currentUser&&this[t(195)][t(245)],handler:async()=>{const n=t;this[n(222)].isRunning=!0;try{await this.checkUser();const t=await Z();if(0===t[n(189)])return void this.ui[n(216)]("–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏");this.ui[n(187)](n(235));const s=await this.arshinService[n(251)](t,this.ui);this.ui[n(187)](n(207));const e=await this.fsaService.arshinRecordsToDrafts(s);this.ui.updateStatus(n(293));const r=await this[n(214)][n(175)](e,this.ui);this.ui[n(187)](""),this.ui.showSuccess("–£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ "+r[n(189)]+n(231)),this[n(214)][n(239)](),this.logEvent(ht[n(250)],r.length,{create_drafts_count:r.length})}catch(t){console[n(169)](n(285),t),this.ui[n(216)]("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ XML –ø—Ä–æ—Ç–æ–∫–æ–ª–∞: "+t[n(226)])}finally{this[n(222)].isRunning=!1}}},{text:t(200),icon:"üìù",type:t(215),visible:!!this.currentUser,handler:async()=>{const n=t;this[n(222)][n(160)]=!0;try{await this[n(288)](),this.ui[n(187)]("–ü–æ–ª—É—á–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤...");const t=await this[n(214)].getAllDrafts();if(0===t[n(189)])return void this.ui[n(187)]("–ù–µ—Ç —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏");if(!confirm(n(249)+t[n(189)]+n(246)))return;const s=t[n(284)](t=>t.id),{invalid:e,ignored:r,success:i}=await this[n(214)][n(275)](s,this.ui);this.ui.showSuccess(n(279)+i.length+" —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤, –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–æ "+r[n(189)]),this.ui[n(187)](n(230)),this[n(214)][n(239)](),this[n(277)](ht[n(283)],i[n(189)],{invalid_drafts_count:e,ignored_count:r[n(189)],success_count:i[n(189)]})}catch(t){console[n(169)](n(209),t),this.ui[n(216)](n(204)+t[n(226)])}finally{this.state[n(160)]=!1}}},{text:t(190),icon:"üßπ",type:"danger",visible:!!this[t(195)],handler:async()=>{const n=t;this[n(222)].isRunning=!0;try{await this.checkUser();const t=await this[n(214)][n(210)]();if(0===t.length)return void this.ui[n(187)](n(240));if(!confirm(n(249)+t[n(189)]+n(205)))return;const s=t.map(t=>t.id),{removed:e,ignored:r}=await this[n(214)][n(280)](s,this.ui);this.ui[n(176)]("–£–¥–∞–ª–µ–Ω–æ "+e[n(189)]+n(223)+r[n(189)]),this.ui[n(187)](n(213)),this.fsaService[n(239)](),this[n(277)](ht[n(242)],e.length,{removed_count:e[n(189)],ignored_count:r[n(189)]})}catch(t){console[n(169)]("Error deleting drafts:",t),this.ui[n(216)](n(165)+t.message)}finally{this[n(222)][n(160)]=!1}}}]}async[lt(157)](){const t=lt;switch(this.setCurrentService(),this[t(273)]){case ot[t(208)]:await this[t(295)][t(274)](),await this.authByArshin(),this.ui.init(),this.ui[t(287)](this[t(166)]());break;case ot[t(253)]:await this[t(214)][t(274)](),await this.authByFsa(),this.ui[t(274)](),this.ui[t(287)](this[t(269)]())}await this[t(161)]()}async[lt(161)](){const t=lt;if(!this[t(195)])return;const n=await this.supabaseService[t(212)](t(173),this[t(195)].key);n&&this.ui.updateStatus(t(197)+(t(294)+(n[t(220)]?tt(n[t(220)]):t(278))+"\n")+(t(218)+(n.last_fsa_sync_date?tt(n.last_fsa_sync_date):"–Ω–µ—Ç")))}async[lt(276)](){const t=lt;if(this[t(195)]){switch(this[t(273)]){case ot[t(208)]:await this[t(203)].updateUser(this[t(195)].id,{last_arshin_sync_date:new Date});break;case ot[t(253)]:await this[t(203)].updateUser(this[t(195)].id,{last_fsa_sync_date:new Date})}await this[t(161)]()}}[lt(257)](){const t=lt,n=window.location[t(268)];if(n[t(183)](ut.ARSHIN))this.currentService=ot[t(208)];else{if(!n[t(183)](ut[t(253)]))throw new Error(t(262));this[t(273)]=ot.FSA}}async[lt(233)](){const t=lt;if(!this[t(295)]?.orgname)throw new Error(t(291));let n=await this[t(203)][t(212)](t(228),this[t(295)][t(228)]);if(!n&&(n=await this[t(203)][t(188)](this[t(295)][t(228)]),!n))throw new Error(t(282));await this[t(203)][t(170)](n),this.currentUser=n}async[lt(158)](){const t=lt;if(!this[t(214)]?.[t(263)])throw new Error(t(236));const n=await this[t(203)][t(212)](t(254),this[t(214)][t(263)]);n&&(await this[t(203)][t(170)](n),this.currentUser=n)}async[lt(288)](){const t=lt;if(!this[t(195)])throw new Error(t(184));const n=await this.supabaseService.getUserByField(t(173),this[t(195)][t(173)]);if(!n)throw new Error(t(267));if(!n[t(245)])throw new Error(t(299));return!0}[lt(286)](){const t=lt;switch(this[t(273)]){case ot.ARSHIN:this.ui[t(287)](this[t(166)]());break;case ot[t(253)]:this.ui[t(287)](this[t(269)]())}}[lt(243)](t,n,s){const e=lt;if(t===e(160))n?(this.ui.showSpinner(),this.ui[e(211)]()):(this.ui.hideSpinner(),this.ui.enableButtons())}async[lt(277)](t,n,s={}){const e=lt;this[e(195)]&&await this[e(296)].logEvent(this[e(195)].id,t,n,s)}}function It(t,n){const s=yt();return(It=function(t,n){return s[t-=425]})(t,n)}function yt(){const t=["–û—à–∏–±–∫–∞ –∏–Ω—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ê—É–¥–∏—Ç–æ—Ä–∞","catch","–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏","1576438qzFpvr","Initialization error:","9645615pZoIvs","error","1052634JnIxbf","1096776STpZCu","–ê—É–¥–∏—Ç–æ—Ä –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ!","4114377woTTTB","2992339BVAxEj","3185885Kxivpc","run","8gODINA","1QiSTZr"];return(yt=function(){return t})()}!function(t){const n=It,s=t();for(;;)try{if(728428===parseInt(n(434))/1*(parseInt(n(438))/2)+-parseInt(n(429))/3+parseInt(n(427))/4+-parseInt(n(431))/5+parseInt(n(426))/6+parseInt(n(430))/7*(parseInt(n(433))/8)+parseInt(n(440))/9)break;s.push(s.shift())}catch(t){s.push(s.shift())}}(yt),function(){const t=It,n=new dt;n[t(432)]().then(async()=>{const n=t;l.info(n(428))})[t(436)](s=>{const e=t;l[e(425)](e(435)),console.error(e(439),s),n.ui.updateStatus(e(437))})}()}();
